var lobbynew=function(){"use strict";var nt=Object.defineProperty;var at=(V,C,D)=>C in V?nt(V,C,{enumerable:!0,configurable:!0,writable:!0,value:D}):V[C]=D;var $=(V,C,D)=>at(V,typeof C!="symbol"?C+"":C,D);var ve,pe;function V(r){return r}var C=Object.prototype.hasOwnProperty;function D(r,e){var t,s;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((s=r.length)===e.length)for(;s--&&D(r[s],e[s]););return s===-1}if(!t||typeof r=="object"){s=0;for(t in r)if(C.call(r,t)&&++s&&!C.call(e,t)||!(t in e)||!D(r[t],e[t]))return!1;return Object.keys(e).length===s}}return r!==r&&e!==e}const Ee=new Error("request for lock canceled");var Ie=function(r,e,t,s){function m(c){return c instanceof t?c:new t(function(d){d(c)})}return new(t||(t=Promise))(function(c,d){function x(p){try{I(s.next(p))}catch(T){d(T)}}function S(p){try{I(s.throw(p))}catch(T){d(T)}}function I(p){p.done?c(p.value):m(p.value).then(x,S)}I((s=s.apply(r,e||[])).next())})};class _e{constructor(e,t=Ee){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((s,m)=>{const c={resolve:s,reject:m,weight:e,priority:t},d=me(this._queue,x=>t<=x.priority);d===-1&&e<=this._value?this._dispatchItem(c):this._queue.splice(d+1,0,c)})}runExclusive(e){return Ie(this,arguments,void 0,function*(t,s=1,m=0){const[c,d]=yield this.acquire(s,m);try{return yield t(c)}finally{d()}})}waitForUnlock(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(s=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),Se(this._weightedWaiters[e-1],{resolve:s,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const t=this._weightedWaiters[e-1];t&&(t.forEach(s=>s.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let t=this._value;t>0;t--){const s=this._weightedWaiters[t-1];if(!s)continue;const m=s.findIndex(c=>c.priority<=e);(m===-1?s:s.splice(0,m)).forEach(c=>c.resolve())}}}_couldLockImmediately(e,t){return(this._queue.length===0||this._queue[0].priority<t)&&e<=this._value}}function Se(r,e){const t=me(r,s=>e.priority<=s.priority);r.splice(t+1,0,e)}function me(r,e){for(let t=r.length-1;t>=0;t--)if(e(r[t]))return t;return-1}var Me=function(r,e,t,s){function m(c){return c instanceof t?c:new t(function(d){d(c)})}return new(t||(t=Promise))(function(c,d){function x(p){try{I(s.next(p))}catch(T){d(T)}}function S(p){try{I(s.throw(p))}catch(T){d(T)}}function I(p){p.done?c(p.value):m(p.value).then(x,S)}I((s=s.apply(r,e||[])).next())})};class ke{constructor(e){this._semaphore=new _e(1,e)}acquire(){return Me(this,arguments,void 0,function*(e=0){const[,t]=yield this._semaphore.acquire(1,e);return t})}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const B=((pe=(ve=globalThis.browser)==null?void 0:ve.runtime)==null?void 0:pe.id)==null?globalThis.chrome:globalThis.browser,O=Te();function Te(){const r={local:K("local"),session:K("session"),sync:K("sync"),managed:K("managed")},e=i=>{const a=r[i];if(a==null){const n=Object.keys(r).join(", ");throw Error(`Invalid area "${i}". Options: ${n}`)}return a},t=i=>{const a=i.indexOf(":"),n=i.substring(0,a),o=i.substring(a+1);if(o==null)throw Error(`Storage key should be in the form of "area:key", but received "${i}"`);return{driverArea:n,driverKey:o,driver:e(n)}},s=i=>i+"$",m=(i,a)=>{const n={...i};return Object.entries(a).forEach(([o,g])=>{g==null?delete n[o]:n[o]=g}),n},c=(i,a)=>i??a??null,d=i=>typeof i=="object"&&!Array.isArray(i)?i:{},x=async(i,a,n)=>{const o=await i.getItem(a);return c(o,(n==null?void 0:n.fallback)??(n==null?void 0:n.defaultValue))},S=async(i,a)=>{const n=s(a),o=await i.getItem(n);return d(o)},I=async(i,a,n)=>{await i.setItem(a,n??null)},p=async(i,a,n)=>{const o=s(a),g=d(await i.getItem(o));await i.setItem(o,m(g,n))},T=async(i,a,n)=>{if(await i.removeItem(a),n!=null&&n.removeMeta){const o=s(a);await i.removeItem(o)}},q=async(i,a,n)=>{const o=s(a);if(n==null)await i.removeItem(o);else{const g=d(await i.getItem(o));[n].flat().forEach(f=>delete g[f]),await i.setItem(o,g)}},F=(i,a,n)=>i.watch(a,n);return{getItem:async(i,a)=>{const{driver:n,driverKey:o}=t(i);return await x(n,o,a)},getItems:async i=>{const a=new Map,n=new Map,o=[];i.forEach(f=>{let y,l;typeof f=="string"?y=f:"getValue"in f?(y=f.key,l={fallback:f.fallback}):(y=f.key,l=f.options),o.push(y);const{driverArea:u,driverKey:A}=t(y),h=a.get(u)??[];a.set(u,h.concat(A)),n.set(y,l)});const g=new Map;return await Promise.all(Array.from(a.entries()).map(async([f,y])=>{(await r[f].getItems(y)).forEach(u=>{const A=`${f}:${u.key}`,h=n.get(A),w=c(u.value,(h==null?void 0:h.fallback)??(h==null?void 0:h.defaultValue));g.set(A,w)})})),o.map(f=>({key:f,value:g.get(f)}))},getMeta:async i=>{const{driver:a,driverKey:n}=t(i);return await S(a,n)},getMetas:async i=>{const a=i.map(g=>{const f=typeof g=="string"?g:g.key,{driverArea:y,driverKey:l}=t(f);return{key:f,driverArea:y,driverKey:l,driverMetaKey:s(l)}}),n=a.reduce((g,f)=>{var y;return g[y=f.driverArea]??(g[y]=[]),g[f.driverArea].push(f),g},{}),o={};return await Promise.all(Object.entries(n).map(async([g,f])=>{const y=await B.storage[g].get(f.map(l=>l.driverMetaKey));f.forEach(l=>{o[l.key]=y[l.driverMetaKey]??{}})})),a.map(g=>({key:g.key,meta:o[g.key]}))},setItem:async(i,a)=>{const{driver:n,driverKey:o}=t(i);await I(n,o,a)},setItems:async i=>{const a={};i.forEach(n=>{const{driverArea:o,driverKey:g}=t("key"in n?n.key:n.item.key);a[o]??(a[o]=[]),a[o].push({key:g,value:n.value})}),await Promise.all(Object.entries(a).map(async([n,o])=>{await e(n).setItems(o)}))},setMeta:async(i,a)=>{const{driver:n,driverKey:o}=t(i);await p(n,o,a)},setMetas:async i=>{const a={};i.forEach(n=>{const{driverArea:o,driverKey:g}=t("key"in n?n.key:n.item.key);a[o]??(a[o]=[]),a[o].push({key:g,properties:n.meta})}),await Promise.all(Object.entries(a).map(async([n,o])=>{const g=e(n),f=o.map(({key:A})=>s(A));console.log(n,f);const y=await g.getItems(f),l=Object.fromEntries(y.map(({key:A,value:h})=>[A,d(h)])),u=o.map(({key:A,properties:h})=>{const w=s(A);return{key:w,value:m(l[w]??{},h)}});await g.setItems(u)}))},removeItem:async(i,a)=>{const{driver:n,driverKey:o}=t(i);await T(n,o,a)},removeItems:async i=>{const a={};i.forEach(n=>{let o,g;typeof n=="string"?o=n:"getValue"in n?o=n.key:"item"in n?(o=n.item.key,g=n.options):(o=n.key,g=n.options);const{driverArea:f,driverKey:y}=t(o);a[f]??(a[f]=[]),a[f].push(y),g!=null&&g.removeMeta&&a[f].push(s(y))}),await Promise.all(Object.entries(a).map(async([n,o])=>{await e(n).removeItems(o)}))},clear:async i=>{await e(i).clear()},removeMeta:async(i,a)=>{const{driver:n,driverKey:o}=t(i);await q(n,o,a)},snapshot:async(i,a)=>{var g;const o=await e(i).snapshot();return(g=a==null?void 0:a.excludeKeys)==null||g.forEach(f=>{delete o[f],delete o[s(f)]}),o},restoreSnapshot:async(i,a)=>{await e(i).restoreSnapshot(a)},watch:(i,a)=>{const{driver:n,driverKey:o}=t(i);return F(n,o,a)},unwatch(){Object.values(r).forEach(i=>{i.unwatch()})},defineItem:(i,a)=>{const{driver:n,driverKey:o}=t(i),{version:g=1,migrations:f={}}=a??{};if(g<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const y=async()=>{var P;const w=s(o),[{value:E},{value:_}]=await n.getItems([o,w]);if(E==null)return;const b=(_==null?void 0:_.v)??1;if(b>g)throw Error(`Version downgrade detected (v${b} -> v${g}) for "${i}"`);if(b===g)return;console.debug(`[@wxt-dev/storage] Running storage migration for ${i}: v${b} -> v${g}`);const M=Array.from({length:g-b},(L,k)=>b+k+1);let v=E;for(const L of M)try{v=await((P=f==null?void 0:f[L])==null?void 0:P.call(f,v))??v}catch(k){throw new Ce(i,L,{cause:k})}await n.setItems([{key:o,value:v},{key:w,value:{..._,v:g}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${i} v${g}`,{migratedValue:v})},l=(a==null?void 0:a.migrations)==null?Promise.resolve():y().catch(w=>{console.error(`[@wxt-dev/storage] Migration failed for ${i}`,w)}),u=new ke,A=()=>(a==null?void 0:a.fallback)??(a==null?void 0:a.defaultValue)??null,h=()=>u.runExclusive(async()=>{const w=await n.getItem(o);if(w!=null||(a==null?void 0:a.init)==null)return w;const E=await a.init();return await n.setItem(o,E),E});return l.then(h),{key:i,get defaultValue(){return A()},get fallback(){return A()},getValue:async()=>(await l,a!=null&&a.init?await h():await x(n,o,a)),getMeta:async()=>(await l,await S(n,o)),setValue:async w=>(await l,await I(n,o,w)),setMeta:async w=>(await l,await p(n,o,w)),removeValue:async w=>(await l,await T(n,o,w)),removeMeta:async w=>(await l,await q(n,o,w)),watch:w=>F(n,o,(E,_)=>w(E??A(),_??A())),migrate:y}}}}function K(r){const e=()=>{if(B.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(B.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const s=B.storage[r];if(s==null)throw Error(`"browser.storage.${r}" is undefined`);return s},t=new Set;return{getItem:async s=>(await e().get(s))[s],getItems:async s=>{const m=await e().get(s);return s.map(c=>({key:c,value:m[c]??null}))},setItem:async(s,m)=>{m==null?await e().remove(s):await e().set({[s]:m})},setItems:async s=>{const m=s.reduce((c,{key:d,value:x})=>(c[d]=x,c),{});await e().set(m)},removeItem:async s=>{await e().remove(s)},removeItems:async s=>{await e().remove(s)},clear:async()=>{await e().clear()},snapshot:async()=>await e().get(),restoreSnapshot:async s=>{await e().set(s)},watch(s,m){const c=d=>{const x=d[s];x!=null&&(D(x.newValue,x.oldValue)||m(x.newValue??null,x.oldValue??null))};return e().onChanged.addListener(c),t.add(c),()=>{e().onChanged.removeListener(c),t.delete(c)}},unwatch(){t.forEach(s=>{e().onChanged.removeListener(s)}),t.clear()}}}class Ce extends Error{constructor(e,t,s){super(`v${t} migration failed for "${e}"`,s),this.key=e,this.version=t}}const Pe={version:5,discord:{enabled:!1,manually:!1,url:"",autoStartAfterTimer:{enabled:!1,minutes:5}},autoStart:{enabled:!1},streamingMode:{enabled:!1,backgroundImage:!1,chromaKeyColor:"#009933",image:"",throws:!1,footerText:"",board:!1,boardImage:!1,avg:!1,scoreBoardSettings:{scale:1,x:0,y:0},coordsSettings:{scale:1,x:0,y:0}},colors:{enabled:!1,background:"#3182CE",text:"#FFFFFF",siteBackground:"#121212"},recentLocalPlayers:{enabled:!1,cap:10,players:[]},takeout:{enabled:!1},smallerScores:{enabled:!1},shufflePlayers:{enabled:!1},caller:{enabled:!1,callEveryDart:!1,callCheckout:!1,sounds:[]},sounds:{enabled:!1},externalBoards:{enabled:!1,boards:[]},hideMenuInMatch:{enabled:!1},automaticFullscreen:{enabled:!1},largerLegsSets:{enabled:!1,value:2.5},largerPlayerMatchData:{enabled:!1,value:1.5},largerPlayerNames:{enabled:!1,value:2.5},automaticNextLeg:{enabled:!1,sec:5},winnerAnimation:{enabled:!1},nextPlayerOnTakeOutStuck:{enabled:!1,sec:10},teamLobby:{enabled:!1},ring:{enabled:!1,size:2,colorEnabled:!0,color:"#000000"},friendsList:{enabled:!1,friends:[],recentPlayers:[]},zoom:{enabled:!1,position:"bottom-right",level:3,mode:"live",zoomOn:"everyone"},quickCorrection:{enabled:!1},animations:{enabled:!1,duration:5,delayStart:1,objectFit:"cover",viewMode:"board-only",data:[{url:"https://media.tenor.com/G4cRydvvtU4AAAAM/ted-hankey-darts.gif",triggers:["t20_t20_bull"],enabled:!0},{url:"https://media1.tenor.com/m/uhkDiMdcP44AAAAd/rapid-darts-darts.gif",triggers:["gameshot"],enabled:!0},{url:"https://media1.tenor.com/m/QriSf7Rc78cAAAAd/darts-niner.gif",triggers:["gameshot"],enabled:!0},{url:"https://media.tenor.com/VGyxDGucFyAAAAAM/dancing-bubbly.gif",triggers:["gameshot"],enabled:!0},{url:"https://media1.tenor.com/m/2SQcMaUE_D8AAAAd/celebrate-winner.gif",triggers:["gameshot"],enabled:!0},{url:"https://media1.tenor.com/m/HhqlzHe8tXsAAAAd/bulls-eye-anderson.gif",triggers:["bull","s50"],enabled:!0},{url:"https://media1.tenor.com/m/Oqlecl-G3xAAAAAd/simon-whitlock-darts-bull.gif",triggers:["bull","s50"],enabled:!0},{url:"https://media1.tenor.com/m/pJJbIyu-Bf0AAAAd/tony-o-shea-tony.gif",triggers:["bull","s50"],enabled:!0},{url:"https://media1.tenor.com/m/bYQ_X5uvRrIAAAAd/gerwyn-price-darts.gif",triggers:["180"],enabled:!0},{url:"https://media1.tenor.com/m/lTiUQMnV_qQAAAAC/gerwynprice-darts.gif",triggers:["180"],enabled:!0},{url:"https://media.tenor.com/xFkVft-1xMQAAAAM/gerwyn-price-darts.gif",triggers:["180"],enabled:!0},{url:"https://media.tenor.com/uL_HJCSQfkIAAAAM/throw-toss.gif",triggers:["180"],enabled:!0},{url:"https://media1.tenor.com/m/psyC1iEr058AAAAd/bulls-eye-animation.gif",triggers:["outside"],enabled:!0},{url:"https://media1.tenor.com/m/x715u156Jz4AAAAd/bbc-america-darts-bbca.gif",triggers:["outside"],enabled:!0},{url:"https://media.tenor.com/sbknQ0awa2sAAAAM/bbc-america-darts-bbca.gif",triggers:["outside"],enabled:!0},{url:"https://media.tenor.com/kD_PH0LHaHEAAAAM/sigh-growl.gif",triggers:["outside"],enabled:!0},{url:"https://media1.tenor.com/m/jaqTZHiIA7EAAAAd/james-wade-darts.gif",triggers:["busted"],enabled:!0},{url:"https://media.tenor.com/LU60882wezcAAAAM/fallon-sherrock-sports.gif",triggers:["busted"],enabled:!0},{url:"https://media.tenor.com/Rpa8qRNWZ3UAAAAM/glen-durrant-miss.gif",triggers:["busted"],enabled:!0},{url:"https://media.tenor.com/tfkMfGGbcLoAAAAM/bbc-america-darts-bbca.gif",triggers:["busted"],enabled:!0}]},soundFx:{enabled:!1,sounds:[{name:"busted",url:"https://www.myinstants.com/media/sounds/super-mario-dies.mp3",base64:"",enabled:!0,triggers:["ambient_busted"]},{name:"triple",url:"https://autodarts.x10.mx/beep_1.mp3",base64:"",enabled:!0,triggers:["ambient_triple"]},{name:"t17",url:"https://autodarts.x10.mx/beep_2_17.wav",base64:"",enabled:!0,triggers:["ambient_t17"]},{name:"t18",url:"https://autodarts.x10.mx/beep_2_18.wav",base64:"",enabled:!0,triggers:["ambient_t18"]},{name:"t19",url:"https://autodarts.x10.mx/beep_2_19.wav",base64:"",enabled:!0,triggers:["ambient_t19"]},{name:"t20",url:"https://autodarts.x10.mx/beep_2_20.wav",base64:"",enabled:!0,triggers:["ambient_t20"]},{name:"bull",url:"https://autodarts.x10.mx/beep_2_bullseye.mp3",base64:"",enabled:!0,triggers:["ambient_bull"]},{name:"miss",url:"https://autodarts.x10.mx/miss_1.mp3",base64:"",enabled:!0,triggers:["ambient_miss"]},{name:"miss",url:"https://autodarts.x10.mx/miss_2.mp3",base64:"",enabled:!0,triggers:["ambient_miss"]},{name:"miss",url:"https://autodarts.x10.mx/miss_3.mp3",base64:"",enabled:!0,triggers:["ambient_miss"]},{name:"gameshot",url:"https://www.myinstants.com/media/sounds/dart-winner.mp3",base64:"",enabled:!0,triggers:["ambient_gameshot"]},{name:"cricket_miss",url:"https://autodarts.x10.mx/sound_double_windart.wav",base64:"",enabled:!0,triggers:["cricket_miss"]},{name:"cricket_hit",url:"https://autodarts.x10.mx/bonus-points.mp3",base64:"",enabled:!0,triggers:["cricket_hit"]}]}},Le=O.defineItem("local:config-2-0-0",{defaultValue:Pe}),De={isFirstStart:!1,user:{name:""},auth:{token:""}};O.defineItem("local:globalstatus",{defaultValue:De}),O.defineItem("local:boardstatus",{defaultValue:void 0});const Fe=O.defineItem("local:urlstatus",{defaultValue:typeof window<"u"&&window.location.href.split("#")[0]||"undefined"});O.defineItem("local:streamingmodestatus",{defaultValue:!1});const $e={private:!1,gameMode:"X01",match:void 0},R=O.defineItem("local:game-data",{defaultValue:$e});function Ve(r,e=3e3){return new Promise((t,s)=>{const m=Date.now(),c=setInterval(()=>{if(Array.isArray(r))for(const d of r){const x=document.querySelector(d);if(x){clearInterval(c),t(x);return}}else{const d=document.querySelector(r);if(d){clearInterval(c),t(d);return}}e!==0&&Date.now()-m>=e&&(clearInterval(c),s(new Error(`Timeout waiting for element ${r}`)))},100)})}function ge(r,e,t=3e3){return new Promise((s,m)=>{const c=Date.now(),d=setInterval(()=>{if(Array.isArray(r))for(const x of r){const S=document.querySelectorAll(x);for(const I of S)if(I.textContent===e){clearInterval(d),s(I);return}}else{const x=document.querySelectorAll(r);for(const S of x)if(S.textContent===e){clearInterval(d),s(S);return}}Date.now()-c>=t&&(clearInterval(d),m(new Error(`Timeout waiting for element ${r} with text content ${e}`)))},100)})}function Oe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var W={exports:{}},Re=W.exports,de;function Ne(){return de||(de=1,function(r,e){(function(t,s){s(r)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Re,function(t){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)t.exports=globalThis.browser;else{const s="The message port closed before a response was received.",m=c=>{const d={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(d).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class x extends WeakMap{constructor(u,A=void 0){super(A),this.createItem=u}get(u){return this.has(u)||this.set(u,this.createItem(u)),super.get(u)}}const S=l=>l&&typeof l=="object"&&typeof l.then=="function",I=(l,u)=>(...A)=>{c.runtime.lastError?l.reject(new Error(c.runtime.lastError.message)):u.singleCallbackArg||A.length<=1&&u.singleCallbackArg!==!1?l.resolve(A[0]):l.resolve(A)},p=l=>l==1?"argument":"arguments",T=(l,u)=>function(h,...w){if(w.length<u.minArgs)throw new Error(`Expected at least ${u.minArgs} ${p(u.minArgs)} for ${l}(), got ${w.length}`);if(w.length>u.maxArgs)throw new Error(`Expected at most ${u.maxArgs} ${p(u.maxArgs)} for ${l}(), got ${w.length}`);return new Promise((E,_)=>{if(u.fallbackToNoCallback)try{h[l](...w,I({resolve:E,reject:_},u))}catch(b){console.warn(`${l} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,b),h[l](...w),u.fallbackToNoCallback=!1,u.noCallback=!0,E()}else u.noCallback?(h[l](...w),E()):h[l](...w,I({resolve:E,reject:_},u))})},q=(l,u,A)=>new Proxy(u,{apply(h,w,E){return A.call(w,l,...E)}});let F=Function.call.bind(Object.prototype.hasOwnProperty);const j=(l,u={},A={})=>{let h=Object.create(null),w={has(_,b){return b in l||b in h},get(_,b,M){if(b in h)return h[b];if(!(b in l))return;let v=l[b];if(typeof v=="function")if(typeof u[b]=="function")v=q(l,l[b],u[b]);else if(F(A,b)){let P=T(b,A[b]);v=q(l,l[b],P)}else v=v.bind(l);else if(typeof v=="object"&&v!==null&&(F(u,b)||F(A,b)))v=j(v,u[b],A[b]);else if(F(A,"*"))v=j(v,u[b],A["*"]);else return Object.defineProperty(h,b,{configurable:!0,enumerable:!0,get(){return l[b]},set(P){l[b]=P}}),v;return h[b]=v,v},set(_,b,M,v){return b in h?h[b]=M:l[b]=M,!0},defineProperty(_,b,M){return Reflect.defineProperty(h,b,M)},deleteProperty(_,b){return Reflect.deleteProperty(h,b)}},E=Object.create(l);return new Proxy(E,w)},i=l=>({addListener(u,A,...h){u.addListener(l.get(A),...h)},hasListener(u,A){return u.hasListener(l.get(A))},removeListener(u,A){u.removeListener(l.get(A))}}),a=new x(l=>typeof l!="function"?l:function(A){const h=j(A,{},{getContent:{minArgs:0,maxArgs:0}});l(h)}),n=new x(l=>typeof l!="function"?l:function(A,h,w){let E=!1,_,b=new Promise(L=>{_=function(k){E=!0,L(k)}}),M;try{M=l(A,h,_)}catch(L){M=Promise.reject(L)}const v=M!==!0&&S(M);if(M!==!0&&!v&&!E)return!1;const P=L=>{L.then(k=>{w(k)},k=>{let ue;k&&(k instanceof Error||typeof k.message=="string")?ue=k.message:ue="An unexpected error occurred",w({__mozWebExtensionPolyfillReject__:!0,message:ue})}).catch(k=>{console.error("Failed to send onMessage rejected reply",k)})};return P(v?M:b),!0}),o=({reject:l,resolve:u},A)=>{c.runtime.lastError?c.runtime.lastError.message===s?u():l(new Error(c.runtime.lastError.message)):A&&A.__mozWebExtensionPolyfillReject__?l(new Error(A.message)):u(A)},g=(l,u,A,...h)=>{if(h.length<u.minArgs)throw new Error(`Expected at least ${u.minArgs} ${p(u.minArgs)} for ${l}(), got ${h.length}`);if(h.length>u.maxArgs)throw new Error(`Expected at most ${u.maxArgs} ${p(u.maxArgs)} for ${l}(), got ${h.length}`);return new Promise((w,E)=>{const _=o.bind(null,{resolve:w,reject:E});h.push(_),A.sendMessage(...h)})},f={devtools:{network:{onRequestFinished:i(a)}},runtime:{onMessage:i(n),onMessageExternal:i(n),sendMessage:g.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:g.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return d.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},j(c,f,d)};t.exports=m(chrome)}})}(W)),W.exports}var qe=Ne();const U=Oe(qe),ee=(r,e)=>e.some(t=>r instanceof t);let Ae,fe;function je(){return Ae||(Ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Be(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const te=new WeakMap,re=new WeakMap,G=new WeakMap;function Ke(r){const e=new Promise((t,s)=>{const m=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(Q(r.result)),m()},d=()=>{s(r.error),m()};r.addEventListener("success",c),r.addEventListener("error",d)});return G.set(e,r),e}function We(r){if(te.has(r))return;const e=new Promise((t,s)=>{const m=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),m()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),m()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});te.set(r,e)}let se={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return te.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Q(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function he(r){se=r(se)}function Ue(r){return Be().includes(r)?function(...e){return r.apply(ne(this),e),Q(this.request)}:function(...e){return Q(r.apply(ne(this),e))}}function Ge(r){return typeof r=="function"?Ue(r):(r instanceof IDBTransaction&&We(r),ee(r,je())?new Proxy(r,se):r)}function Q(r){if(r instanceof IDBRequest)return Ke(r);if(re.has(r))return re.get(r);const e=Ge(r);return e!==r&&(re.set(r,e),G.set(e,r)),e}const ne=r=>G.get(r),Qe=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],ae=new Map;function be(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ae.get(e))return ae.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,m=ze.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(m||Qe.includes(t)))return;const c=async function(d,...x){const S=this.transaction(d,m?"readwrite":"readonly");let I=S.store;return s&&(I=I.index(x.shift())),(await Promise.all([I[t](...x),m&&S.done]))[0]};return ae.set(e,c),c}he(r=>({...r,get:(e,t,s)=>be(e,t)||r.get(e,t,s),has:(e,t)=>!!be(e,t)||r.has(e,t)}));const He=["continue","continuePrimaryKey","advance"],we={},ie=new WeakMap,xe=new WeakMap,Ze={get(r,e){if(!He.includes(e))return r[e];let t=we[e];return t||(t=we[e]=function(...s){ie.set(this,xe.get(this)[e](...s))}),t}};async function*Ye(...r){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...r)),!e)return;e=e;const t=new Proxy(e,Ze);for(xe.set(t,e),G.set(t,ne(e));e;)yield t,e=await(ie.get(t)||e.continue()),ie.delete(t)}function ye(r,e){return e===Symbol.asyncIterator&&ee(r,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&ee(r,[IDBIndex,IDBObjectStore])}he(r=>({...r,get(e,t,s){return ye(e,t)?Ye:r.get(e,t,s)},has(e,t){return ye(e,t)||r.has(e,t)}}));const z=new Audio,H=new Audio,Z=new Audio;z.preload="auto",H.preload="auto",Z.preload="auto",z.addEventListener("canplaythrough",()=>{z.paused&&z.autoplay&&console.log("Sound 1 loaded and ready to play")}),H.addEventListener("canplaythrough",()=>{H.paused&&H.autoplay&&console.log("Sound 2 loaded and ready to play")}),Z.addEventListener("canplaythrough",()=>{Z.paused&&Z.autoplay&&console.log("Sound 3 loaded and ready to play")});function Je(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Xe(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||navigator.userAgent.includes("AppleWebKit")&&!navigator.userAgent.includes("Chrome")}const et={matches:["*://play.autodarts.io/*"],cssInjectionMode:"ui",async main(){Fe.watch(async r=>{if(!r&&(Je()||Xe())&&(r=window.location.href),await Le.getValue(),/\/lobbies\/*new\//.test(r)){console.log("Autodarts Tools: Lobby New Ready");const e=await R.getValue(),t=await Ve("h2"),s=await ge("button","Public"),m=await ge("button","Private");await R.setValue({...e,gameMode:t.textContent}),console.log("Autodarts Tools: Game Mode",t.textContent),s==null||s.addEventListener("click",async()=>{await R.setValue({...e,private:!1}),console.log("Autodarts Tools: Lobby is Public")}),m==null||m.addEventListener("click",async()=>{await R.setValue({...e,private:!0}),console.log("Autodarts Tools: Lobby is Private")}),s!=null&&s.hasAttribute("data-active")?(await R.setValue({...e,private:!1}),console.log("Autodarts Tools: Lobby is Public")):m!=null&&m.hasAttribute("data-active")&&(await R.setValue({...e,private:!0}),console.log("Autodarts Tools: Lobby is Private"))}})}};function Y(r,...e){}const tt={debug:(...r)=>Y(console.debug,...r),log:(...r)=>Y(console.log,...r),warn:(...r)=>Y(console.warn,...r),error:(...r)=>Y(console.error,...r)},X=class X extends Event{constructor(e,t){super(X.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=t}};$(X,"EVENT_NAME",le("wxt:locationchange"));let oe=X;function le(r){var e;return`${(e=U==null?void 0:U.runtime)==null?void 0:e.id}:lobbynew:${r}`}function rt(r){let e,t;return{run(){e==null&&(t=new URL(location.href),e=r.setInterval(()=>{let s=new URL(location.href);s.href!==t.href&&(window.dispatchEvent(new oe(s,t)),t=s)},1e3))}}}const N=class N{constructor(e,t){$(this,"isTopFrame",window.self===window.top);$(this,"abortController");$(this,"locationWatcher",rt(this));$(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=t,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return U.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,t){const s=setInterval(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(e,t){const s=setTimeout(()=>{this.isValid&&e()},t);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(e){const t=requestAnimationFrame((...s)=>{this.isValid&&e(...s)});return this.onInvalidated(()=>cancelAnimationFrame(t)),t}requestIdleCallback(e,t){const s=requestIdleCallback((...m)=>{this.signal.aborted||e(...m)},t);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(e,t,s,m){var c;t==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(c=e.addEventListener)==null||c.call(e,t.startsWith("wxt:")?le(t):t,s,{...m,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),tt.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:N.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var c,d,x;const t=((c=e.data)==null?void 0:c.type)===N.SCRIPT_STARTED_MESSAGE_TYPE,s=((d=e.data)==null?void 0:d.contentScriptName)===this.contentScriptName,m=!this.receivedMessageIds.has((x=e.data)==null?void 0:x.messageId);return t&&s&&m}listenForNewerScripts(e){let t=!0;const s=m=>{if(this.verifyScriptStartedEvent(m)){this.receivedMessageIds.add(m.data.messageId);const c=t;if(t=!1,c&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}};$(N,"SCRIPT_STARTED_MESSAGE_TYPE",le("wxt:content-script-started"));let ce=N;function it(){}function J(r,...e){}const st={debug:(...r)=>J(console.debug,...r),log:(...r)=>J(console.log,...r),warn:(...r)=>J(console.warn,...r),error:(...r)=>J(console.error,...r)};return(async()=>{try{const{main:r,...e}=et,t=new ce("lobbynew",e);return await r(t)}catch(r){throw st.error('The content script "lobbynew" crashed on startup!',r),r}})()}();
lobbynew;
